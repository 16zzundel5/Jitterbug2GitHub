From myers@eng.utah.edu  Fri Jul 18 09:51:01 2014
Return-Path: <myers@eng.utah.edu>
Received: from bowie.eng.utah.edu (bowie.eng.utah.edu [155.98.110.113])
	by chou.ece.utah.edu (8.14.7/8.14.4) with ESMTP id s6IFp1nQ031411
	for <atacs-bugs@vlsigroup.ece.utah.edu>; Fri, 18 Jul 2014 09:51:01 -0600
Received: from 99-42-67-233.lightspeed.irvnca.sbcglobal.net ([99.42.67.233] helo=[192.168.0.89])
	by bowie.eng.utah.edu with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.72 (FreeBSD))
	(envelope-from <myers@eng.utah.edu>)
	id 1X8AfK-000MCc-Iw
	for atacs-bugs@vlsigroup.ece.utah.edu; Fri, 18 Jul 2014 10:05:46 -0600
From: "Chris J. Myers" <myers@ece.utah.edu>
Content-Type: multipart/alternative; boundary="Apple-Mail=_2DEEE8F7-5325-4616-BDF3-6259CD330885"
Message-Id: <E5E947FA-5628-481D-86B8-C1B47EE5044B@ece.utah.edu>
Mime-Version: 1.0 (Mac OS X Mail 7.3 \(1878.6\))
Subject: Re: CHANGE: reaction dimension / indices (PR#6098)
Date: Fri, 18 Jul 2014 09:50:54 -0600
References: <201407171814.s6HIEHvh011074@chou.ece.utah.edu>
To: Scott Glass <atacs-bugs@vlsigroup.ece.utah.edu>
In-Reply-To: <201407171814.s6HIEHvh011074@chou.ece.utah.edu>
X-Mailer: Apple Mail (2.1878.6)
Sender: myers@eng.utah.edu


--Apple-Mail=_2DEEE8F7-5325-4616-BDF3-6259CD330885
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

I'm not sure I understand your question but the code below from the =
products editor is problematic:

			dimID =3D =
SBMLutilities.checkSizeParameters(bioModel.getSBMLDocument(), =
productId.getText());
			if(dimID!=3Dnull){
				dimensionIds =3D =
SBMLutilities.getDimensionIds(dimID.length-1);
				error =3D =
SBMLutilities.checkID(bioModel.getSBMLDocument(), dimID[0].trim(), =
selectedProductId, false);
			}
			else{
				error =3D true;
			}
			if(productSpecies.isEnabled() && !error){
				SBase variable =3D =
SBMLutilities.getElementBySId(bioModel.getSBMLDocument(), =
(String)productSpecies.getSelectedItem());
				dex =3D =
SBMLutilities.checkIndices(PiIndex.getText(), variable, =
bioModel.getSBMLDocument(), dimensionIds, "variable");
				error =3D (dex=3D=3Dnull);
			}
			if (dimID[0].equals("")) {
				error =3D =
SBMLutilities.variableInUse(bioModel.getSBMLDocument(), selectedID, =
false, true, true);
			}
			else {
				error =3D =
SBMLutilities.checkID(bioModel.getSBMLDocument(), dimID[0], selectedID, =
false);
			}

The problem is that "dimID[0]" can be "null" (see the warning eclipse =
gives you).  You should not even be performing this checks though in =
this case as "error" would be true if this is the case.  If you do these =
checks, then error could get overwritten.  Once one error is found, you =
should not perform more checks. =20

Chris

On Jul 17, 2014, at 12:14 PM, Scott Glass =
<atacs-bugs@vlsigroup.ece.utah.edu> wrote:

> I cannot have the species references modify their dimensions in the ID =
field
> because it does not accept brackets in checkIndices. Should =
checkIndices be
> modified to accept this new ID format?


--Apple-Mail=_2DEEE8F7-5325-4616-BDF3-6259CD330885
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">I'm =
not sure I understand your question but the code below from the products =
editor is problematic:<div><br></div><div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">			</span>dimID =3D =
SBMLutilities.checkSizeParameters(bioModel.getSBMLDocument(), <span =
style=3D"color: #0326cc">productId</span>.getText());</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">			=
</span><span style=3D"color: #931a68">if</span>(dimID!=3D<span =
style=3D"color: #931a68">null</span>){</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">				=
</span>dimensionIds =3D SBMLutilities.getDimensionIds(dimID.<span =
style=3D"color: #0326cc">length</span>-1);</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco;"><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre">				</span>error =3D =
SBMLutilities.checkID(bioModel.getSBMLDocument(), dimID[0].trim(), =
selectedProductId, <span style=3D"color: =
#931a68">false</span>);</div><div style=3D"margin: 0px; font-size: 11px; =
font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">			</span>}</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">			=
</span><span style=3D"color: #931a68">else</span>{</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">				=
</span>error =3D <span style=3D"color: #931a68">true</span>;</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">			=
</span>}</div><div style=3D"margin: 0px; font-size: 11px; font-family: =
Monaco;"><span class=3D"Apple-tab-span" style=3D"white-space:pre">		=
	</span><span style=3D"color: #931a68">if</span>(<span =
style=3D"color: #0326cc">productSpecies</span>.isEnabled() &amp;&amp; =
!error){</div><div style=3D"margin: 0px; font-size: 11px; font-family: =
Monaco;"><span class=3D"Apple-tab-span" style=3D"white-space:pre">		=
		</span>SBase variable =3D =
SBMLutilities.getElementBySId(bioModel.getSBMLDocument(), (String)<span =
style=3D"color: =
#0326cc">productSpecies</span>.getSelectedItem());</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">				=
</span>dex =3D SBMLutilities.checkIndices(<span style=3D"color: =
#0326cc">PiIndex</span>.getText(), variable, bioModel.getSBMLDocument(), =
dimensionIds, <span style=3D"color: =
#3933ff">"variable"</span>);</div><div style=3D"margin: 0px; font-size: =
11px; font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">				</span>error =3D =
(dex=3D=3D<span style=3D"color: #931a68">null</span>);</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">			=
</span>}</div><div style=3D"margin: 0px; font-size: 11px; font-family: =
Monaco;"><span class=3D"Apple-tab-span" style=3D"white-space:pre">		=
	</span><span style=3D"color: #931a68">if</span> (<span =
style=3D"text-decoration: underline">dimID</span>[0].equals(<span =
style=3D"color: #3933ff">""</span>)) {</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">				</span>error =3D =
SBMLutilities.variableInUse(bioModel.getSBMLDocument(), selectedID, =
<span style=3D"color: #931a68">false</span>, <span style=3D"color: =
#931a68">true</span>, <span style=3D"color: =
#931a68">true</span>);</div><div style=3D"margin: 0px; font-size: 11px; =
font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">			</span>}</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">			=
</span><span style=3D"color: #931a68">else</span> {</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">				=
</span>error =3D SBMLutilities.checkID(bioModel.getSBMLDocument(), =
dimID[0], selectedID, <span style=3D"color: =
#931a68">false</span>);</div><div style=3D"margin: 0px; font-size: 11px; =
font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">			=
</span>}</div></div><div><br></div><div>The problem is that "dimID[0]" =
can be "null" (see the warning eclipse gives you). &nbsp;You should not =
even be performing this checks though in this case as "error" would be =
true if this is the case. &nbsp;If you do these checks, then error could =
get overwritten. &nbsp;Once one error is found, you should not perform =
more checks. =
&nbsp;</div><div><br></div><div>Chris</div><div><br><div><div>On Jul 17, =
2014, at 12:14 PM, Scott Glass &lt;<a =
href=3D"mailto:atacs-bugs@vlsigroup.ece.utah.edu">atacs-bugs@vlsigroup.ece=
.utah.edu</a>&gt; wrote:</div><br =
class=3D"Apple-interchange-newline"><blockquote type=3D"cite">I cannot =
have the species references modify their dimensions in the ID =
field<br>because it does not accept brackets in checkIndices. Should =
checkIndices be<br>modified to accept this new ID =
format?<br></blockquote></div><br></div></body></html>=

--Apple-Mail=_2DEEE8F7-5325-4616-BDF3-6259CD330885--


From myers@eng.utah.edu  Tue Sep  1 21:01:18 2015
Return-Path: <myers@eng.utah.edu>
Received: from mailhub.eng.utah.edu (mailhub.eng.utah.edu [155.98.110.27])
	by chou.ece.utah.edu (8.14.9/8.14.4) with ESMTP id t8231IAa002919
	for <atacs-bugs@vlsigroup.ece.utah.edu>; Tue, 1 Sep 2015 21:01:18 -0600
Received: from panic.eng.utah.edu ([155.98.110.176])
	by mailhub.eng.utah.edu with esmtps TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256
	(Exim 4.84 id 1ZWyIW-000CVj-P9); Tue, 01 Sep 2015 21:01:18 -0600
Received: from c-98-202-139-229.hsd1.ut.comcast.net ([98.202.139.229] helo=[10.0.0.232])
	by panic.eng.utah.edu with esmtpsa (TLSv1:DHE-RSA-AES256-SHA:256)
	(Exim 4.84 (FreeBSD))
	(envelope-from <myers@eng.utah.edu>)
	id 1ZWyIW-0003Jx-HK; Tue, 01 Sep 2015 21:01:16 -0600
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2070.6\))
Subject: Re: BUG: VHDL compiler does not compile the Boolean condition for "while" loop correctly
From: "Chris J. Myers" <myers@ece.utah.edu>
In-Reply-To: <CA+LVOvkRike15vsHmF4AXWipaEDNULRYBZuC_88_PQiSuFvjbQ@mail.gmail.com>
Date: Tue, 1 Sep 2015 21:01:09 -0600
Cc: atacs-bugs <atacs-bugs@vlsigroup.ece.utah.edu>
Message-Id: <DC6E7AD1-A693-4B9C-BB31-8F5176A2CE41@ece.utah.edu>
References: <CA+LVOvkRike15vsHmF4AXWipaEDNULRYBZuC_88_PQiSuFvjbQ@mail.gmail.com>
To: Zhen Zhang <zhen.zhang@utah.edu>
X-Mailer: Apple Mail (2.2070.6)
X-UCE-Score: -2.5 (--)
X-spam-level: --
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by chou.ece.utah.edu id t8231IAa002919

I’m pretty sure your problem is that you are using integers.  We assume integers are supposed to be turned into “true” as they represent non-deterministic choices returned by selection.  I think if you change free to a std_logic, that you will have better luck.

By the way, I got ATACS to compile on my Mac, but I had to comment out some code, likely breaking things.  Luckily nothing critical path for you, but I would like to see if I can figure out what I broke before I check-in.  Bloody STL is not stable.  It is all C++/STL code that causes problems.

Chris

> On Sep 1, 2015, at 4:19 PM, Zhen Zhang <zhen.zhang@utah.edu> wrote:
> 
> The Boolean condition condition is compiled to a nondetermnistic
> choice in LPN: a place with two postset transitions whose enabling
> conditions are "true". Here is a detailed example that illustrate this
> error. The relevant files mentioned below are located in
> /home/ming/zhangz/nobackup/research/lpn/noc2by2_livelock_free.
> 
> The top-level file is top_arbiter_nack_2.vhd. The arbiter that takes
> two inputs and nondeterministically selects one output is modeled in
> arbiter_nack_2.vhd. The two inputs, namely an input from an IP router
> and an input from a router that makes an illegal turn, compete for
> sending its packet to the arbiter. While-loops are used in the arbiter
> to model its behavior so that it rejects the illegal turn request
> while serving a packet.
> 
> The compiling error is that the Boolean condition for the while loop
> is missing, and only a nondeterministic decision between two choices
> is produced: one exits the loop and the other remains in the loop.
> This can be seen as the following place and transitions in
> top_arbiter_nack_2_NEW.dot: p_62, d_13P_arbiter_nack_2_arb_w_111
> (exiting the loop), and d_12_P_arbiter_nack_2_arb_w_111 (remaining in
> the loop). They are in the leftmost LPN on the dot file.



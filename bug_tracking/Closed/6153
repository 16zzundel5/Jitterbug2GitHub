From myers@eng.utah.edu  Mon Aug 25 19:06:47 2014
Return-Path: <myers@eng.utah.edu>
Received: from bowie.eng.utah.edu (bowie.eng.utah.edu [155.98.110.113])
	by chou.ece.utah.edu (8.14.7/8.14.4) with ESMTP id s7Q16kWu001639
	for <atacs-bugs@vlsigroup.ece.utah.edu>; Mon, 25 Aug 2014 19:06:47 -0600
Received: from c-67-177-39-60.hsd1.ut.comcast.net ([67.177.39.60] helo=[10.0.0.3])
	by bowie.eng.utah.edu with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.72 (FreeBSD))
	(envelope-from <myers@eng.utah.edu>)
	id 1XM5kT-000JQe-Tz; Mon, 25 Aug 2014 19:40:38 -0600
From: "Chris J. Myers" <myers@ece.utah.edu>
Content-Type: multipart/alternative; boundary="Apple-Mail=_06BDB640-3FBC-4EF1-A3C0-BD5DD0511339"
Subject: BUG: flatten can fail so assembly should quit
Date: Mon, 25 Aug 2014 17:05:18 -0600
Message-Id: <3FE5FA05-B883-4C74-B6C1-96CFB3CE5A27@ece.utah.edu>
Cc: "Nicholas Roehner (via Google Drive)" <nicholasroehner@gmail.com>
To: Leandro Hikiji Watanabe <atacs-bugs@vlsigroup.ece.utah.edu>
Mime-Version: 1.0 (Mac OS X Mail 7.3 \(1878.6\))
X-Mailer: Apple Mail (2.1878.6)
Sender: myers@eng.utah.edu


--Apple-Mail=_06BDB640-3FBC-4EF1-A3C0-BD5DD0511339
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

When flatten fails (returns null) assembly should quit and not throw =
exception.  See code here:

	public AssemblyGraph(BioModel biomodel) {
		assemblyNodes =3D new HashSet<AssemblyNode>(); // =
Initialize map of SBML element meta IDs to assembly nodes they identify
		assemblyEdges =3D new HashMap<AssemblyNode, =
Set<AssemblyNode>>(); // Initialize map of assembly node IDs to sets of =
node IDs (node IDs are SBML meta IDs)
		SBMLDocument sbmlDoc =3D biomodel.getSBMLDocument();
		HashMap<String, AssemblyNode> idToNode =3D new =
HashMap<String, AssemblyNode>();
//		 Creates assembly nodes for submodels and connect them =
to nodes for species
		if =
(/*sbmlDoc.getExtensionPackages().containsKey(CompConstants.namespaceURI)
				&& */parseSubModelSBOL(sbmlDoc, =
biomodel.getPath(), idToNode)) {
			// Creates flattened assembly graph in case =
hierarchy of SBOL can't be preserved
			SBMLDocument flatDoc =3D =
biomodel.flattenModel(true);
			flatAssemblyGraph =3D new =
AssemblyGraph(flatDoc);
		}
		constructGraph(sbmlDoc, idToNode);
	}

Needs null check and fail gracefully.

Chris=

--Apple-Mail=_06BDB640-3FBC-4EF1-A3C0-BD5DD0511339
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">When =
flatten fails (returns null) assembly should quit and not throw =
exception. &nbsp;See code here:<div><br></div><div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco;"><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre">	</span><span style=3D"color: =
#931a68">public</span> AssemblyGraph(BioModel biomodel) {</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco; color: =
rgb(78, 144, 114);"><span style=3D"color: #000000"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		=
</span></span><span style=3D"color: #0326cc">assemblyNodes</span><span =
style=3D"color: #000000"> =3D </span><span style=3D"color: =
#931a68">new</span><span style=3D"color: #000000"> =
HashSet&lt;AssemblyNode&gt;(); </span>// Initialize map of SBML element =
meta IDs to assembly nodes they identify</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco; color: rgb(78, 144, 114);"><span =
style=3D"color: #000000"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span></span><span =
style=3D"color: #0326cc">assemblyEdges</span><span style=3D"color: =
#000000"> =3D </span><span style=3D"color: #931a68">new</span><span =
style=3D"color: #000000"> HashMap&lt;AssemblyNode, =
Set&lt;AssemblyNode&gt;&gt;(); </span>// Initialize map of assembly node =
IDs to sets of node IDs (node IDs are SBML meta IDs)</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		=
</span>SBMLDocument sbmlDoc =3D biomodel.getSBMLDocument();</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		=
</span>HashMap&lt;String, AssemblyNode&gt; idToNode =3D <span =
style=3D"color: #931a68">new</span> HashMap&lt;String, =
AssemblyNode&gt;();</div><div style=3D"margin: 0px; font-size: 11px; =
font-family: Monaco; color: rgb(78, 144, 114);">//<span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		</span> =
Creates assembly nodes for <span style=3D"text-decoration: =
underline">submodels</span> and connect them to nodes for =
species</div><div style=3D"margin: 0px; font-size: 11px; font-family: =
Monaco; color: rgb(78, 144, 114);"><span style=3D"color: #000000"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		=
</span></span><span style=3D"color: #931a68">if</span><span =
style=3D"color: #000000"> =
(</span>/*sbmlDoc.getExtensionPackages().containsKey(CompConstants.namespa=
ceURI)</div><div style=3D"margin: 0px; font-size: 11px; font-family: =
Monaco;"><span style=3D"color: #4e9072"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">				=
</span>&amp;&amp; */</span>parseSubModelSBOL(sbmlDoc, =
biomodel.getPath(), idToNode)) {</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco; color: rgb(78, 144, 114);"><span =
style=3D"color: #000000"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">			</span></span>// Creates =
flattened assembly graph in case hierarchy of SBOL can't be =
preserved</div><div style=3D"margin: 0px; font-size: 11px; font-family: =
Monaco;"><span class=3D"Apple-tab-span" style=3D"white-space:pre">		=
	</span>SBMLDocument flatDoc =3D biomodel.flattenModel(<span =
style=3D"color: #931a68">true</span>);</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">			</span><span =
style=3D"color: #0326cc">flatAssemblyGraph</span> =3D <span =
style=3D"color: #931a68">new</span> AssemblyGraph(flatDoc);</div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		=
</span>}</div><div style=3D"margin: 0px; font-size: 11px; font-family: =
Monaco;"><span class=3D"Apple-tab-span" style=3D"white-space:pre">		=
</span>constructGraph(sbmlDoc, idToNode);</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco;"><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre">	</span>}</div></div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco;"><br></div><div>Needs null =
check and fail =
gracefully.</div><div><br></div><div>Chris</div></body></html>=

--Apple-Mail=_06BDB640-3FBC-4EF1-A3C0-BD5DD0511339--


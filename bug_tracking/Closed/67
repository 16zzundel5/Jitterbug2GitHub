From peskin@sanguo.elen.utah.edu  Thu Mar 18 11:53:30 1999
Received: from sanguo.elen.utah.edu (sanguo.elen.utah.edu [128.110.18.227]) by yuan.elen.utah.edu with ESMTP (8.7.1/8.7.1) id LAA16999 for <atacs-bugs@ming.elen.utah.edu>; Thu, 18 Mar 1999 11:53:30 -0700 (MST)
Received: (from peskin@localhost)
	by sanguo.elen.utah.edu (8.8.7/8.8.7) id LAA10209
	for atacs-bugs@ming.elen.utah.edu; Thu, 18 Mar 1999 11:53:33 -0700
Date: Thu, 18 Mar 1999 11:53:33 -0700
From: Eric Peskin <peskin@sanguo.elen.utah.edu>
Message-Id: <199903181853.LAA10209@sanguo.elen.utah.edu>
To: atacs-bugs@ming.elen.utah.edu
Subject: merge.csp unexpected deadlock with posets.

SYSTEM: linux (Linux sanguo 2.0.34 #12 Tue Aug 4 16:37:01 MDT 1998 i686 unknown)
WHO:    peskin               
WHERE:  /.automount/shang/root/home/shang/peskin/examples/bugs/mergeSafe                 
WHEN:   Thu Mar 18 11:52:56 MST 1999                
WHAT:   -rwx------ 1 peskin async 10368819 Mar 18 09:38 /home/shang/peskin/atacs/atacs               
HOW:    atacs -ms -ya merge            
OUTPUT:                       
ATACS VERSION 4.1
Logging session in:  atacs.log
Using PO sets timing to obtain state graphs.
Compiling merge.csp ... 
Storing process MERGE to MERGE.er
Storing process MERGEsdgENV to MERGEsdgENV.er
Storing process ZsdgENV to ZsdgENV.er
Storing process merge to merge.er
Storing process merge to merge.er
Loading timed event-rule structure from:  merge.er
WARNING:  Duplicate rules ignored.
Initializing 3 cycles ... done
Checking liveness ... live
Checking connectivity ... strongly connected
Checking safety ... safe
Finding redundant rules ... done
Finding reduced state graph ... 57 iterations 50 regions, 27 new_reg, 23 states (stack_depth = 43)
nodes = 300, dead = 1456
memory: max=553492 inuse=550916 free=2576 
146 iterations 100 regions, 51 new_reg, 36 states (stack_depth = 76)
nodes = 300, dead = 1456
memory: max=705044 inuse=698740 free=6304 
237 iterations 150 regions, 73 new_reg, 44 states (stack_depth = 96)
nodes = 300, dead = 1456
memory: max=815636 inuse=808940 free=6696 
356 iterations 200 regions, 97 new_reg, 46 states (stack_depth = 110)
nodes = 300, dead = 1456
memory: max=905748 inuse=901604 free=4144 
466 iterations 250 regions, 121 new_reg, 50 states (stack_depth = 138)
nodes = 300, dead = 1456
memory: max=1036820 inuse=1033116 free=3704 
620 iterations 300 regions, 136 new_reg, 51 states (stack_depth = 135)
nodes = 300, dead = 1456
memory: max=1094164 inuse=1083900 free=10264 
752 iterations 350 regions, 154 new_reg, 53 states (stack_depth = 151)
nodes = 300, dead = 1456
memory: max=1188372 inuse=1183348 free=5024 
System deadlocked in state 0000R1
Storing error trace state graph to:  merge.grf
Executing command:  parg merge.grf &
Storing error trace in VHDL to:  trace.vhd
                              
STATUS:  0       
              
FILE: ./merge.csp:
module merge;
    input 	Xi	= {false};
    output	Xo	= {false};

    input 	Yi	= {false};
    output	Yo	= {false};

    output	Zo	= {false};
    input 	Zi	= {false};

    process MERGE;
        *[
            [ Xi+ ->   Xo+; 
                [Zi-@]; Zo+; 
			    [Xi-]; Xo-;
			    [Zi+]; Zo-
            | Yi+ ->   Yo+; 
                [Zi-@]; Zo+; 
			    [Yi-]; Yo-;
			    [Zi+]; Zo-
            ]
         ]
    endprocess

    process MERGEsdgENV;
        *[
            [ skip -> Xi+; [Xo+]; Xi-; [Xo-]
            | skip -> Yi+; [Yo+]; Yi-; [Yo-]
            ]
         ]
    endprocess

    process ZsdgENV;
        *[
            [ Zo+ -> Zi+; [Zo-]; Zi-
            | Zo+ -> Zi+; [Zo-]; Zi-
            ]
         ]
    endprocess

endmodule
              
              
FILE: ./merge.er:
.e 17
.i 8
.r 50
.n 0
.d 2
.c 24
.s 000000
reset
# 
# INPUT EVENTS:
# 
Yi+/1 Yi-/1
Xi+/1 Xi-/1
Zi+/1 Zi-/1
Zi+/2 Zi-/2
# 
# OUTPUT EVENTS:
# 
Yo+/1 Yo-/1
Zo+/1 Zo-/1
Zo+/2 Zo-/2
Xo+/1 Xo-/1
# 
# DUMMY EVENTS:
# 
# 
# RULES:
# 
Zo+/1 Zi+/1 0 0 inf
Zo-/1 Zi-/1 0 0 inf
Zi+/1 Zi-/1 0 0 inf
Zo+/2 Zi+/2 0 0 inf
Zo-/2 Zi-/2 0 0 inf
Zi+/2 Zi-/2 0 0 inf
reset Zi+/2 0 0 inf
reset Zi+/1 0 0 inf
reset Xo+/1 0 0 inf
reset Yo+/1 0 0 inf
reset Xo+/1 0 0 inf
reset Yo+/1 0 0 inf
Yo-/1 Zo-/2 0 0 inf
Zi+/2 Zo-/2 0 0 inf
Zo+/2 Yo-/1 0 0 inf
Yi-/1 Yo-/1 0 0 inf
reset Zo+/2 0 0 inf
Yo+/1 Zo+/2 0 0 inf
Yi+/1 Yo+/1 0 0 inf
Xo-/1 Zo-/1 0 0 inf
Zi+/1 Zo-/1 0 0 inf
Zo+/1 Xo-/1 0 0 inf
Xi-/1 Xo-/1 0 0 inf
reset Zo+/1 0 0 inf
Xo+/1 Zo+/1 0 0 inf
Xi+/1 Xo+/1 0 0 inf
reset Xi+/1 0 0 inf
reset Yi+/1 0 0 inf
Yo+/1 Yi-/1 0 0 inf
Yi+/1 Yi-/1 0 0 inf
Xo+/1 Xi-/1 0 0 inf
Xi+/1 Xi-/1 0 0 inf
# 
# INITIAL RULES:
# 
Zi-/1 Zi+/2 1 0 inf
Zi-/1 Zi+/1 1 0 inf
Zi-/2 Zi+/2 1 0 inf
Zi-/2 Zi+/1 1 0 inf
Zo-/2 Xo+/1 1 0 inf
Zo-/2 Yo+/1 1 0 inf
Zo-/1 Xo+/1 1 0 inf
Zo-/1 Yo+/1 1 0 inf
Zi-/2 Zo+/2 1 0 inf
Zi-/1 Zo+/1 1 0 inf
Yo-/1 Xi+/1 1 0 inf
Yo-/1 Yi+/1 1 0 inf
Yi-/1 Xi+/1 1 0 inf
Yi-/1 Yi+/1 1 0 inf
Xo-/1 Xi+/1 1 0 inf
Xo-/1 Yi+/1 1 0 inf
Xi-/1 Xi+/1 1 0 inf
Xi-/1 Yi+/1 1 0 inf
# 
# RULES:
# 
# 
# INITIAL RULES:
# 
# 
# MERGERS:
# 
Zo+/1 Zo+/2 
Zi+/1 Zi+/2 
# 
# CONFLICTS:
# 
Zi+/1 Zi+/2
Zi+/1 Zi-/2
Zi-/1 Zi+/2
Zi-/1 Zi-/2
Zo-/1 Zo-/2
Zo-/1 Yo-/1
Zo-/1 Zo+/2
Zo-/1 Yo+/1
Xo-/1 Zo-/2
Xo-/1 Yo-/1
Xo-/1 Zo+/2
Xo-/1 Yo+/1
Zo+/1 Zo-/2
Zo+/1 Yo-/1
Zo+/1 Zo+/2
Zo+/1 Yo+/1
Xo+/1 Zo-/2
Xo+/1 Yo-/1
Xo+/1 Zo+/2
Xo+/1 Yo+/1
Xi+/1 Yi+/1
Xi+/1 Yi-/1
Xi-/1 Yi+/1
Xi-/1 Yi-/1
# 
# LOOPING CONFLICTS:
# 
              
              
FILE: ./merge.grf:
N F S0 0:RR0000
N F S53 53:0000R1
N F S4 4:00RF10
N F S7 7:RRF000
N F S6 6:RR10F0
N F S5 5:001F10
N F S9 9:01000R
N F S10 10:0F00R1
N F S8 8:01F00R
N F S1 1:100R00
N F S2 2:F001R0
N F S3 3:F0R110
N E T0 Yi+/1:2147483647
E P S0 0 T0 0
E P T0 0 S1 0
N E T1 Zi+/2:2147483647
E P S4 0 T1 0
E P T1 0 S5 0
N E T2 Xi+/1:2147483647
E P S7 0 T2 0
E P T2 0 S8 0
N E T3 Zo-/2:2147483647
E P S6 0 T3 0
E P T3 0 S7 0
N E T4 Yo-/1:2147483647
E P S5 0 T4 0
E P T4 0 S6 0
N E T5 Xo+/1:2147483647
E P S9 0 T5 0
E P T5 0 S10 0
N E T6 Xi-/1:2147483647
E P S10 0 T6 0
E P T6 0 S53 0
N E T7 Zi-/2:2147483647
E P S8 0 T7 0
E P T7 0 S9 0
N E T8 Yo+/1:2147483647
E P S1 0 T8 0
E P T8 0 S2 0
N E T9 Zo+/2:2147483647
E P S2 0 T9 0
E P T9 0 S3 0
N E T10 Yi-/1:2147483647
E P S3 0 T10 0
E P T10 0 S4 0
ZZZZZ              

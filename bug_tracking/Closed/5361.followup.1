From rodrigue@ebi.ac.uk  Mon May 16 06:18:47 2011
Return-Path: <rodrigue@ebi.ac.uk>
Received: from spike.ebi.ac.uk (spike.ebi.ac.uk [193.62.196.9])
	by chou.ece.utah.edu (8.14.4/8.14.4) with ESMTP id p4GCIk5V009203
	for <atacs-bugs@vlsigroup.ece.utah.edu>; Mon, 16 May 2011 06:18:46 -0600
Received: from swallowtail.ebi.ac.uk (swallowtail.ebi.ac.uk [172.22.8.255])
	by spike.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id p4GCIdkv030205;
	Mon, 16 May 2011 13:18:39 +0100
Message-ID: <4DD1161F.6020602@ebi.ac.uk>
Date: Mon, 16 May 2011 13:18:39 +0100
From: Nicolas Rodriguez <rodrigue@ebi.ac.uk>
User-Agent: Thunderbird 2.0.0.22 (X11/20090625)
MIME-Version: 1.0
To: Chris Myers <atacs-bugs@vlsigroup.ece.utah.edu>
CC: myers@ece.utah.edu
Subject: Re: BUG : iBioSim launch script no working (PR#5361)
References: <201105131524.p4DFOodh008426@chou.ece.utah.edu>
In-Reply-To: <201105131524.p4DFOodh008426@chou.ece.utah.edu>
Content-Type: multipart/alternative;
 boundary="------------000503090902080706000501"

This is a multi-part message in MIME format.
--------------000503090902080706000501
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Chris Myers wrote:
> Hi Nicolas, 
>
> Thanks for all your useful feedback on iBioSim.
>   
>> I am trying to install iBioSim on the EBI machines and run into several 
>> problems.
>> I tried to go to the bug database 
>> (http://www.async.ece.utah.edu/cgi-bin/atacs) but I was
>> not able to fill in a bug there. (just found the mail to use at the end 
>> of the manual)
>>
>>     
> We are using a pretty antiquated bug database, and when we updated our system
> the online bug submission broke.  Not sure why.  Glad you found the email
> version.  We should likely add a pointer to this on our website to make it more
> obvious.
>
>   
>> I have downloaded iBioSim 1.5 (Fedora 13 x64) 
>> (http://www.async.ece.utah.edu/iBioSim/iBioSim-1.5-Linux-x86_64-Install)
>>
>> And the iBioSim script to start the program has a wrong CLASSPATH, has 
>> there was several libraries changed I have updated the script to
>> include all the libraries in the gui/lib folder :
>>
>> --------------------------------------------------------------------------------
>>
>> CLASSPATH=$BIOSIM/gui/dist/classes
>>
>> for jarFile in $BIOSIM_LIB_PATH/*.jar
>> do
>>     CLASSPATH=$CLASSPATH:$jarFile
>> done
>>
>> exec java -Xmx512M -classpath $CLASSPATH biomodelsim.BioSim
>>
>> -------------------------------------------------------------------------------
>>
>> Like this, you don't need to worry about jar names changing, all of them 
>> are included.
>>     
>
> This is a great suggestion which we will certainly use in our next set of
> scripts.  Will need to figure out how to do this in windows batch files
> though...  do you know how?
>
>   
Yes, I took example from the ant windows scripts that do a lot of 
complicated stuff.

But I just noticed from 
http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html
that you can use wildcards in CLASSPATH, so just "%LIB_PATH%/*" should 
do the job !!!

> Class path entries can contain the basename wildcard character *, 
> which is considered equivalent to specifying a list of all the files 
> in the directory with the extension |.jar| or |.JAR|. For example, the 
> class path entry |foo/*| specifies all JAR files in the directory 
> named |foo|. A classpath entry consisting simply of * expands to a 
> list of all the jar files in the current directory.
>
> A class path entry that contains * will not match class files. To 
> match both classes and JAR files in a single directory |foo|, use 
> either |foo;foo/*| or |foo/*;foo|. The order chosen determines whether 
> the classes and resources in |foo| are loaded before JAR files in 
> |foo|, or vice versa.
>
> Subdirectories are not searched recursively. For example, |foo/*| 
> looks for JAR files only in |foo|, not in |foo/bar|, |foo/baz|, etc.
>


> As for the startup problem, it is likely due to the fact that the quickstart
> icons do not see the BIOSIM variable right away.  Often what needs to be done is
> for you to log out and back in to get it to show up.  However, once you have
> installed once, the BIOSIM variable is there (assuming you don't move your
> install), and this problem usually goes away.
>   
No, no, the problem was that some jar files are not named properly in 
the iBioSim script.
For example :
gui/lib/jfreechart-1.0.13.jar is in the script 
$BIOSIM/gui/lib/jfreechart-1.0.9.jar
gui/lib/biomodelswslib-standalone-1.11.jar is missing in the script
and there is other errors.

After a quick check, it seems only the iBioSim script has errors, 
iBioSim.linux or IBioSim.linux64 have the proper jar files names.

>   
>> I have removed libsbmlj64.jar and sbmlj.jar as there was already a 
>> libsbmlj.jar
>>
>>     
> The sbmlj.jar file is there for windows systems which require the filename to
> not have the <lib> prefix.  Should be removed though in the linux install.  As
> for libsbmlj64.jar, I convinced myself at some point that the 64-bit version of
> libsbmlj.jar was different than the 32-bit version.  I will need to double check
> this because I'm not now sure that this is the case. 
>
>   
The jar file should be able to be the same in the three cases, there is 
not differences.
For windows, only the .dll need to have a specific name, the jar file 
can have any names.

>> If you do not modified the CLASSPATH, you cannot start the program as 
>> you get NoClassDefFoundException, the first one being :
>>
>> Exception in thread "main" java.lang.NoClassDefFoundError: 
>> org/jfree/chart/event/ChartProgressListener
>>
>>     
> Again, I think this is due to the delayed setting of the BIOSIM variable. 
> However, it is possible that we missed a jar in the script for the latest
> install.  Your solution definitely solves this potential issue.
>
>   
As I said a bit above, there are some jar files with wrong names but 
only on the iBioSim script.
After the installation, I had a NoClassDefFoundError because of the 
BIOSIM variable not defined, so I defined it
and went to the iBioSim bin folder and used the most obvious script, the 
one with no extension.

Thanks,
Nico






--------------000503090902080706000501
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
</head>
<body bgcolor="#ffffff" text="#000000">
Chris Myers wrote:
<blockquote cite="mid:201105131524.p4DFOodh008426@chou.ece.utah.edu"
 type="cite">
  <pre wrap="">Hi Nicolas, 

Thanks for all your useful feedback on iBioSim.
  </pre>
  <blockquote type="cite">
    <pre wrap="">I am trying to install iBioSim on the EBI machines and run into several 
problems.
I tried to go to the bug database 
(<a class="moz-txt-link-freetext" href="http://www.async.ece.utah.edu/cgi-bin/atacs">http://www.async.ece.utah.edu/cgi-bin/atacs</a>) but I was
not able to fill in a bug there. (just found the mail to use at the end 
of the manual)

    </pre>
  </blockquote>
  <pre wrap=""><!---->We are using a pretty antiquated bug database, and when we updated our system
the online bug submission broke.  Not sure why.  Glad you found the email
version.  We should likely add a pointer to this on our website to make it more
obvious.

  </pre>
  <blockquote type="cite">
    <pre wrap="">I have downloaded iBioSim 1.5 (Fedora 13 x64) 
(<a class="moz-txt-link-freetext" href="http://www.async.ece.utah.edu/iBioSim/iBioSim-1.5-Linux-x86_64-Install">http://www.async.ece.utah.edu/iBioSim/iBioSim-1.5-Linux-x86_64-Install</a>)

And the iBioSim script to start the program has a wrong CLASSPATH, has 
there was several libraries changed I have updated the script to
include all the libraries in the gui/lib folder :

--------------------------------------------------------------------------------

CLASSPATH=$BIOSIM/gui/dist/classes

for jarFile in $BIOSIM_LIB_PATH/*.jar
do
    CLASSPATH=$CLASSPATH:$jarFile
done

exec java -Xmx512M -classpath $CLASSPATH biomodelsim.BioSim

-------------------------------------------------------------------------------

Like this, you don't need to worry about jar names changing, all of them 
are included.
    </pre>
  </blockquote>
  <pre wrap=""><!---->
This is a great suggestion which we will certainly use in our next set of
scripts.  Will need to figure out how to do this in windows batch files
though...  do you know how?

  </pre>
</blockquote>
Yes, I took example from the ant windows scripts that do a lot of
complicated stuff.<br>
<br>
But I just noticed from
<a class="moz-txt-link-freetext" href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html">http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html</a><br>
that you can use wildcards in CLASSPATH, so just "%LIB_PATH%/*" should
do the job !!!<br>
<br>
<blockquote type="cite">
  <p>Class path entries can contain the basename wildcard character *,
which is considered equivalent to specifying a list of all the files in
the directory with the extension <code>.jar</code> or <code>.JAR</code>.
For example, the class path entry <code>foo/*</code> specifies all JAR
files in the directory named <code>foo</code>. A classpath entry
consisting simply of * expands to a list of all the jar files in the
current directory.</p>
  <p>A class path entry that contains * will not match class files. To
match both classes and JAR files in a single directory <code>foo</code>,
use either <code>foo;foo/*</code> or <code>foo/*;foo</code>. The
order chosen determines whether the classes and resources in <code>foo</code>
are loaded before JAR files in <code>foo</code>, or vice versa.</p>
  <p>Subdirectories are not searched recursively. For example, <code>foo/*</code>
looks for JAR files only in <code>foo</code>, not in <code>foo/bar</code>,
  <code>foo/baz</code>, etc.</p>
</blockquote>
<br>
<br>
<blockquote cite="mid:201105131524.p4DFOodh008426@chou.ece.utah.edu"
 type="cite">
  <pre wrap="">As for the startup problem, it is likely due to the fact that the quickstart
icons do not see the BIOSIM variable right away.  Often what needs to be done is
for you to log out and back in to get it to show up.  However, once you have
installed once, the BIOSIM variable is there (assuming you don't move your
install), and this problem usually goes away.
  </pre>
</blockquote>
No, no, the problem was that some jar files are not named properly in
the iBioSim script.<br>
For example :<br>
gui/lib/jfreechart-1.0.13.jar is in the script
$BIOSIM/gui/lib/jfreechart-1.0.9.jar<br>
gui/lib/biomodelswslib-standalone-1.11.jar is missing in the script <br>
and there is other errors.<br>
<br>
After a quick check, it seems only the iBioSim script has errors,
iBioSim.linux or IBioSim.linux64 have the proper jar files names.<br>
<br>
<blockquote cite="mid:201105131524.p4DFOodh008426@chou.ece.utah.edu"
 type="cite">
  <pre wrap="">
  </pre>
  <blockquote type="cite">
    <pre wrap="">I have removed libsbmlj64.jar and sbmlj.jar as there was already a 
libsbmlj.jar

    </pre>
  </blockquote>
  <pre wrap=""><!---->The sbmlj.jar file is there for windows systems which require the filename to
not have the &lt;lib&gt; prefix.  Should be removed though in the linux install.  As
for libsbmlj64.jar, I convinced myself at some point that the 64-bit version of
libsbmlj.jar was different than the 32-bit version.  I will need to double check
this because I'm not now sure that this is the case. 

  </pre>
</blockquote>
The jar file should be able to be the same in the three cases, there is
not differences.<br>
For windows, only the .dll need to have a specific name, the jar file
can have any names.<br>
<br>
<blockquote cite="mid:201105131524.p4DFOodh008426@chou.ece.utah.edu"
 type="cite">
  <pre wrap=""></pre>
  <blockquote type="cite">
    <pre wrap="">If you do not modified the CLASSPATH, you cannot start the program as 
you get NoClassDefFoundException, the first one being :

Exception in thread "main" java.lang.NoClassDefFoundError: 
org/jfree/chart/event/ChartProgressListener

    </pre>
  </blockquote>
  <pre wrap=""><!---->Again, I think this is due to the delayed setting of the BIOSIM variable. 
However, it is possible that we missed a jar in the script for the latest
install.  Your solution definitely solves this potential issue.

  </pre>
</blockquote>
As I said a bit above, there are some jar files with wrong names but
only on the iBioSim script.<br>
After the installation, I had a NoClassDefFoundError because of the
BIOSIM variable not defined, so I defined it<br>
and went to the iBioSim bin folder and used the most obvious script,
the one with no extension.<br>
<br>
Thanks,<br>
Nico<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>

--------------000503090902080706000501--


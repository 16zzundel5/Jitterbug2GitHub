From myers@eng.utah.edu  Tue May 14 09:01:26 2013
Return-Path: <myers@eng.utah.edu>
Received: from bowie.eng.utah.edu (bowie.eng.utah.edu [155.98.110.113])
	by chou.ece.utah.edu (8.14.5/8.14.4) with ESMTP id r4EF1NQr017565
	for <atacs-bugs@vlsigroup.ece.utah.edu>; Tue, 14 May 2013 09:01:23 -0600
Received: from c-98-202-13-26.hsd1.ut.comcast.net ([98.202.13.26] helo=[10.0.0.2])
	by bowie.eng.utah.edu with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.72 (FreeBSD))
	(envelope-from <myers@eng.utah.edu>)
	id 1UcGZl-0008OG-TF
	for atacs-bugs@vlsigroup.ece.utah.edu; Tue, 14 May 2013 08:51:38 -0600
From: "Chris J. Myers" <myers@ece.utah.edu>
Content-Type: multipart/alternative; boundary="Apple-Mail=_31FC7466-BA1E-4E87-B57F-DC047488699D"
Subject: BUG: crash using libsbml for simulation
Date: Tue, 14 May 2013 09:01:22 -0600
References: <5C119CCD-86C5-4739-8946-0AA7CB48E292@caltech.edu>
To: Leandro Hikiji Watanabe <atacs-bugs@vlsigroup.ece.utah.edu>
Message-Id: <BCCF76BB-4146-4453-AD3B-C4FF473508C7@ece.utah.edu>
Mime-Version: 1.0 (Mac OS X Mail 6.3 \(1503\))
X-Mailer: Apple Mail (2.1503)
Sender: myers@eng.utah.edu


--Apple-Mail=_31FC7466-BA1E-4E87-B57F-DC047488699D
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii



Begin forwarded message:

> From: "Frank T. Bergmann" <fbergman@caltech.edu>
> Subject: Re: [libsbml-team] Fwd: log
> Date: May 14, 2013 3:04:31 AM MDT
> To: "Chris J. Myers" <myers@ece.utah.edu>
> Cc: LibSBML Team Mailing List <libsbml-team@caltech.edu>, LEANDRO =
HIKIJI WATANABE <l.watanabe@utah.edu>
>=20
> Hello Chris,=20
>=20
> this is the same problem as before. The Java Garbage collector is =
freeing memory in another thread than the one that the memory was =
allocated from, this results in a corruption of the native library. I'm =
afraid the only thing that can be done is to:=20
>=20
> - use the serial garbage collector (invoking java with a vendor =
specific flag)
> - increase the java heap size (so as to have the memory less =
frequently collected)
> - collect memory manually.=20
>=20
> You could of course copy the values into your internal data structures =
once upon loading, and then rely on them, that would also be save.=20
>=20
> more information:=20
>=20
> =
https://github.com/fbergmann/libsbml-tomcat-tutorial/blob/master/files/201=
2-10-22_-_LibSBMLJavaBindingsAndJVMCrashes.pdf
>=20
> Cheers
> Frank
>=20
>=20
> On May 14, 2013, at 12:45 AM, "Chris J. Myers" <myers@ece.utah.edu> =
wrote:
>=20
>> Hi,
>>=20
>> We are getting a strange crash in libsbml.  This is happening in =
using libsbml through the java bindings.  The crash is coming during =
stochastic simulation.  The strange thing is when we simulate a small =
number of runs, it does not crash but as we increase the number of runs =
we get this crash.  I vaguely remember something similar before, and I'm =
not sure if we ever fixed it as the student started using jSBML to get =
around the problem.  This will not work for this simulator as it is one =
that is simulating hierarchical models without flattening, so we need =
comp which I believe jSBML is still without support for.
>>=20
>> Thanks,
>>=20
>> Chris
>>=20
>>=20
>> <hs_err_pid4633.log>
>=20


--Apple-Mail=_31FC7466-BA1E-4E87-B57F-DC047488699D
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space; =
"><br><div><br><div>Begin forwarded message:</div><br =
class=3D"Apple-interchange-newline"><blockquote type=3D"cite"><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px;"><span style=3D"font-family:'Helvetica'; =
font-size:medium; color:rgba(0, 0, 0, 1.0);"><b>From: </b></span><span =
style=3D"font-family:'Helvetica'; font-size:medium;">"Frank T. Bergmann" =
&lt;<a =
href=3D"mailto:fbergman@caltech.edu">fbergman@caltech.edu</a>&gt;<br></spa=
n></div><div style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: =
0px; margin-left: 0px;"><span style=3D"font-family:'Helvetica'; =
font-size:medium; color:rgba(0, 0, 0, 1.0);"><b>Subject: =
</b></span><span style=3D"font-family:'Helvetica'; =
font-size:medium;"><b>Re: [libsbml-team] Fwd: =
log</b><br></span></div><div style=3D"margin-top: 0px; margin-right: =
0px; margin-bottom: 0px; margin-left: 0px;"><span =
style=3D"font-family:'Helvetica'; font-size:medium; color:rgba(0, 0, 0, =
1.0);"><b>Date: </b></span><span style=3D"font-family:'Helvetica'; =
font-size:medium;">May 14, 2013 3:04:31 AM MDT<br></span></div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px;"><span style=3D"font-family:'Helvetica'; =
font-size:medium; color:rgba(0, 0, 0, 1.0);"><b>To: </b></span><span =
style=3D"font-family:'Helvetica'; font-size:medium;">"Chris J. Myers" =
&lt;<a =
href=3D"mailto:myers@ece.utah.edu">myers@ece.utah.edu</a>&gt;<br></span></=
div><div style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: =
0px; margin-left: 0px;"><span style=3D"font-family:'Helvetica'; =
font-size:medium; color:rgba(0, 0, 0, 1.0);"><b>Cc: </b></span><span =
style=3D"font-family:'Helvetica'; font-size:medium;">LibSBML Team =
Mailing List &lt;<a =
href=3D"mailto:libsbml-team@caltech.edu">libsbml-team@caltech.edu</a>&gt;,=
 LEANDRO HIKIJI WATANABE &lt;<a =
href=3D"mailto:l.watanabe@utah.edu">l.watanabe@utah.edu</a>&gt;<br></span>=
</div><br><div>Hello Chris, <br><br>this is the same problem as before. =
The Java Garbage collector is freeing memory in another thread than the =
one that the memory was allocated from, this results in a corruption of =
the native library. I'm afraid the only thing that can be done is to: =
<br><br>- use the serial garbage collector (invoking java with a vendor =
specific flag)<br>- increase the java heap size (so as to have the =
memory less frequently collected)<br>- collect memory manually. =
<br><br>You could of course copy the values into your internal data =
structures once upon loading, and then rely on them, that would also be =
save. <br><br>more information: <br><br><a =
href=3D"https://github.com/fbergmann/libsbml-tomcat-tutorial/blob/master/f=
iles/2012-10-22_-_LibSBMLJavaBindingsAndJVMCrashes.pdf">https://github.com=
/fbergmann/libsbml-tomcat-tutorial/blob/master/files/2012-10-22_-_LibSBMLJ=
avaBindingsAndJVMCrashes.pdf</a><br><br>Cheers<br>Frank<br><br><br>On =
May 14, 2013, at 12:45 AM, "Chris J. Myers" &lt;myers@ece.utah.edu&gt; =
wrote:<br><br><blockquote type=3D"cite">Hi,<br><br>We are getting a =
strange crash in libsbml. &nbsp;This is happening in using libsbml =
through the java bindings. &nbsp;The crash is coming during stochastic =
simulation. &nbsp;The strange thing is when we simulate a small number =
of runs, it does not crash but as we increase the number of runs we get =
this crash. &nbsp;I vaguely remember something similar before, and I'm =
not sure if we ever fixed it as the student started using jSBML to get =
around the problem. &nbsp;This will not work for this simulator as it is =
one that is simulating hierarchical models without flattening, so we =
need comp which I believe jSBML is still without support =
for.<br><br>Thanks,<br><br>Chris<br><br><br>&lt;hs_err_pid4633.log&gt;<br>=
</blockquote><br></div></blockquote></div><br></body></html>=

--Apple-Mail=_31FC7466-BA1E-4E87-B57F-DC047488699D--


From myers@eng.utah.edu  Fri Oct 24 09:30:41 2014
Return-Path: <myers@eng.utah.edu>
Received: from bowie.eng.utah.edu (bowie.eng.utah.edu [155.98.110.113])
	by chou.ece.utah.edu (8.14.7/8.14.4) with ESMTP id s9OFUfL4012153
	for <atacs-bugs@vlsigroup.ece.utah.edu>; Fri, 24 Oct 2014 09:30:41 -0600
Received: from c-67-177-39-60.hsd1.ut.comcast.net ([67.177.39.60] helo=[10.0.0.3])
	by bowie.eng.utah.edu with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.72 (FreeBSD))
	(envelope-from <myers@eng.utah.edu>)
	id 1XhhMu-000CF6-6F
	for atacs-bugs@vlsigroup.ece.utah.edu; Fri, 24 Oct 2014 10:05:36 -0600
From: "Chris J. Myers" <myers@ece.utah.edu>
Content-Type: multipart/alternative; boundary="Apple-Mail=_ABC13319-EC0C-4E89-BFC6-07EAB71A6FD3"
Subject: BUG: problems with arrays flattening
Message-Id: <0A69BB10-20E4-4089-8320-F72B747F0801@ece.utah.edu>
Date: Fri, 24 Oct 2014 09:30:40 -0600
To: Leandro Hikiji Watanabe <atacs-bugs@vlsigroup.ece.utah.edu>
Mime-Version: 1.0 (Mac OS X Mail 7.3 \(1878.6\))
X-Mailer: Apple Mail (2.1878.6)
Sender: myers@eng.utah.edu


--Apple-Mail=_ABC13319-EC0C-4E89-BFC6-07EAB71A6FD3
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi,

If you open SubModel.xml then save it, you get this warning message:

14/10/24 09:26:08 WARN jsbml.AbstractSBase: SBase SBaseRef =
[portRef=3Doutput__V4, idRef=3Dnull, unitRef=3Dnull, metaIdRef=3Dnull] =
is associated to the different parent output__V4__C1. Please remove it =
there before adding it to this port or add a clone of it to this =
element.

When I try to flatten SubModel.xml, I get this exception:

java.lang.NullPointerException
	at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.expandDim(ArraysFlat=
tening.java:671)
	at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.expandDim(ArraysFlat=
tening.java:647)
	at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(ArraysFlatte=
ning.java:571)
	at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(ArraysFlatte=
ning.java:572)
	at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(ArraysFlatte=
ning.java:549)
	at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(ArraysFlatte=
ning.java:95)
	at biomodel.parser.BioModel.flattenModel(BioModel.java:7292)
	at =
biomodel.gui.schematic.ModelEditor.createSBML(ModelEditor.java:1200)
	at =
biomodel.gui.schematic.ModelEditor.saveParams(ModelEditor.java:803)
	at =
analysis.main.AnalysisView.actionPerformed(AnalysisView.java:1545)

If I delete V4 from the model, then try to flatten.  It does flatten =
(see SubModel_temp.xml).  However, as you can see in the file, the ports =
are not flattened and the deletions in the original model have =
disappeared.

Any ideas?

Thanks,

Chris



--Apple-Mail=_ABC13319-EC0C-4E89-BFC6-07EAB71A6FD3
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dus-ascii"><meta http-equiv=3D"Content-Type" content=3D"text/html=
 charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: =
after-white-space;">Hi,<div><br></div><div>If you open SubModel.xml then =
save it, you get this warning message:</div><div><br></div><div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco; color: =
rgb(255, 38, 0);">14/10/24 09:26:08 WARN jsbml.AbstractSBase: SBase =
SBaseRef [portRef=3Doutput__V4, idRef=3Dnull, unitRef=3Dnull, =
metaIdRef=3Dnull] is associated to the different parent output__V4__C1. =
Please remove it there before adding it to this port or add a clone of =
it to this element.</div><div><br></div><div>When I try to flatten =
SubModel.xml, I get this exception:</div><div><br></div><div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco; color: =
rgb(4, 51, 255);"><span style=3D"text-decoration: =
underline">java.lang.NullPointerException</span></div><div =
style=3D"margin: 0px; font-size: 11px; font-family: Monaco; color: =
rgb(255, 38, 0);"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.expandDim(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ArraysFlattening.java:671</span>)</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco; color: rgb(255, 38, =
0);"><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.expandDim(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ArraysFlattening.java:647</span>)</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco; color: rgb(255, 38, =
0);"><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ArraysFlattening.java:571</span>)</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco; color: rgb(255, 38, =
0);"><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ArraysFlattening.java:572</span>)</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco; color: rgb(255, 38, =
0);"><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ArraysFlattening.java:549</span>)</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco; color: rgb(255, 38, =
0);"><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>at =
org.sbml.jsbml.ext.arrays.flattening.ArraysFlattening.convert(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ArraysFlattening.java:95</span>)</div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco; color: rgb(255, 38, =
0);"><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>at biomodel.parser.BioModel.flattenModel(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">BioModel.java:7292</span>)</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco; color: rgb(255, 38, 0);"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>at =
biomodel.gui.schematic.ModelEditor.createSBML(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ModelEditor.java:1200</span>)</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco; color: rgb(255, 38, 0);"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>at =
biomodel.gui.schematic.ModelEditor.saveParams(<span =
style=3D"text-decoration: underline ; color: =
#0433ff">ModelEditor.java:803</span>)</div><div style=3D"margin: 0px; =
font-size: 11px; font-family: Monaco; color: rgb(255, 38, 0);"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>at =
analysis.main.AnalysisView.actionPerformed(<span style=3D"text-decoration:=
 underline ; color: =
#0433ff">AnalysisView.java:1545</span>)</div></div><div style=3D"margin: =
0px; font-size: 11px; font-family: Monaco; color: rgb(255, 38, =
0);"><br></div><div>If I delete V4 from the model, then try to flatten. =
&nbsp;It does flatten (see SubModel_temp.xml). &nbsp;However, as you can =
see in the file, the ports are not flattened and the deletions in the =
original model have disappeared.</div><div><br></div><div>Any =
ideas?</div><div><br></div><div>Thanks,</div><div><br></div><div>Chris</di=
v><div><br></div><div></div></div><br><meta http-equiv=3D"Content-Type" =
content=3D"text/html =
charset=3Dus-ascii"><div><div></div></div></body></html>=

--Apple-Mail=_ABC13319-EC0C-4E89-BFC6-07EAB71A6FD3--


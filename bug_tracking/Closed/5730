From myers@eng.utah.edu  Thu Jul 26 14:31:57 2012
Return-Path: <myers@eng.utah.edu>
Received: from bowie.eng.utah.edu (bowie.eng.utah.edu [155.98.110.113])
	by chou.ece.utah.edu (8.14.5/8.14.4) with ESMTP id q6QKVvZ6006836
	for <atacs-bugs@vlsigroup.ece.utah.edu>; Thu, 26 Jul 2012 14:31:57 -0600
Received: from jiaqi.ece.utah.edu ([155.98.27.199] helo=[192.168.1.101])
	by bowie.eng.utah.edu with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.72 (FreeBSD))
	(envelope-from <myers@eng.utah.edu>)
	id 1SuUZq-000CMi-Nv
	for atacs-bugs@vlsigroup.ece.utah.edu; Thu, 26 Jul 2012 14:22:30 -0600
From: "Chris J. Myers" <myers@ece.utah.edu>
Content-Type: text/plain; charset=us-ascii
Subject: CHANGE: create composite component only when no composite exists
Date: Thu, 26 Jul 2012 14:31:40 -0600
Message-Id: <4F2E59D6-36B1-4E32-A0AA-467C0C4FB631@ece.utah.edu>
To: Jason Stevens <atacs-bugs@vlsigroup.ece.utah.edu>
Mime-Version: 1.0 (Apple Message framework v1278)
X-Mailer: Apple Mail (2.1278)
Sender: myers@eng.utah.edu
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by chou.ece.utah.edu id q6QKVvZ6006836

Add to the BioModel object a flag that indicates that the model is annotated with an SBOL component and another flag that indicates whether any SBML elements are annotated with SBOL components.  Both flags are false initially.

When you add a component to the model, if the SBMLelement flag is true, you ask the user if they want to delete the SBMLelement annotations.  If so, delete them all before adding the model annotation.  Set the model annotation flag to true and the SBMLelement flag to false.

When you add a component to an SBML element, if the model flag is true and the the SBMLelement flag is false, you ask the user if they wish to delete the model annotation.  If they say yes, delete the annotation and set the model flag to false.  This operation will also set the SBMLelement flag to true when concluded successfully.  

Add fields for library, name, and description of the top-level SBOL model annotation to the model editor.  These fields should not be editable when model flag is true and SBMLelement flag is false.  Otherwise, these fields should be editable.

Upon save, if SBMLelement flag is true, generate a new top-level model annotation.  DisplayId should be the modelId, name and description should be taken from the model editor text boxes.  If model flag is true, you will need to first delete the existing SBOL component from the library.




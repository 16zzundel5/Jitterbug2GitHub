From myers@jiaqi.elen.utah.edu  Fri May 21 09:30:44 1999
Received: from jiaqi.elen.utah.edu (han.elen.utah.edu [155.99.23.196]) by yuan.elen.utah.edu with ESMTP (8.7.1/8.7.1) id JAA06114 for <atacs-bugs@shang.elen.utah.edu>; Fri, 21 May 1999 09:30:42 -0600 (MDT)
Received: (from myers@localhost)
	by jiaqi.elen.utah.edu (8.8.7/8.8.7) id JAA00677
	for atacs-bugs@shang.elen.utah.edu; Fri, 21 May 1999 09:30:19 -0600
From: "Chris J. Myers" <myers@vlsigroup.elen.utah.edu>
Message-Id: <199905211530.JAA00677@jiaqi.elen.utah.edu>
Subject: Re: Create a help file. (PR#140)
To: atacs-bugs@shang.elen.utah.edu (Eric Robert Peskin)
Date: Fri, 21 May 1999 09:30:16 -0600 (MDT)
In-Reply-To: <199905201459.IAA01348@yuan.elen.utah.edu> from "Eric Robert Peskin" at May 20, 99 08:59:08 am
Content-Type: text

> 
> This seems to work in interactive text mode.
> 
> But Xatacs does not seem to be using the ATACSHELP environment variable (which I
> have set to /home/ming/atacs/help
> 
> Instead, it is looking in /home/jiaqi/myers/research/cad/atacs/help
> 
>
Check out atacs.tcl and replace proc help with the following function.
This will cause it to use the environment variable for the help path.
---------------------------------------------------------------------- 
proc help {} {
    global helpfunction temp2filename errfilename
    global prsinput prslog env

    set w .helper 
    catch {destroy $w}
    toplevel $w
    wm title $w $helpfunction
    scrollbar $w.scroll -command "$w.list yview"
    pack $w.scroll -side right -fill y
    scrollbar $w.scroll2 -command "$w.list xview" -orient horizontal
    pack $w.scroll2 -side bottom -fill x
    text $w.list -xscroll "$w.scroll2 set" -yscroll "$w.scroll set" \
	    -relief raised -setgrid true -width 80 -height 25 
#	    -font -Adobe-Courier-Medium-R-Normal--*-120-* 
    pack $w.list -side left -fill both -expand yes
    set prslog $w.list
    wm minsize $w 1 1

    set temp1 {more }
    global temp2filename tempfilename errfilename input log oripath  
    set command [append temp1 $env(ATACSHELP) $helpfunction ".fmt"]
    if [catch {open "|$command |& cat"} prsinput] {
#		$log insert end $input\n
    } else {
	fileevent $prsinput readable ReptLog
#		$log insert end $command\n
	        
    }
#    set temp2filename {}
#    set errfilename {}
#    eval [concat X_interface h $helpfunction]
#    More
}

